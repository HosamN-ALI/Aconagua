# Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ - Saudi Smart Math Tutor

## ğŸ“ Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù„ÙØ§Øª

```
my-smart-teacher/
â”‚
â”œâ”€â”€ ğŸ“‹ .blackbox/rules/              # Ù‚ÙˆØ§Ø¹Ø¯ Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„Ø³ÙŠØ§Ù‚ Ù„Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
â”‚   â”œâ”€â”€ 01-architecture.md          # Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù…Ø¹Ù…Ø§Ø±ÙŠØ© Modular Monolith
â”‚   â”œâ”€â”€ 02-tech-stack.md            # Ø§Ù„ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙˆØ£ÙØ¶Ù„ Ø§Ù„Ù…Ù…Ø§Ø±Ø³Ø§Øª
â”‚   â””â”€â”€ 03-atomic-design.md         # Ù‚ÙˆØ§Ø¹Ø¯ Atomic Design Ù„Ù„Ù€ Frontend
â”‚
â”œâ”€â”€ ğŸ“š docs/
â”‚   â””â”€â”€ MASTER_PLAN.md              # Ø®Ø§Ø±Ø·Ø© Ø§Ù„Ø·Ø±ÙŠÙ‚ Ø§Ù„ØªÙ†ÙÙŠØ°ÙŠØ©
â”‚
â”œâ”€â”€ ğŸ”§ Backend (NestJS)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.ts                 # Ù†Ù‚Ø·Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ù„Ù„ØªØ·Ø¨ÙŠÙ‚
â”‚   â”‚   â”œâ”€â”€ app.module.ts           # Ø§Ù„ÙˆØ­Ø¯Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ modules/                # Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (Modular Monolith)
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/               # ğŸ” ÙˆØ­Ø¯Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.module.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ auth.controller.ts
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ curriculum/         # ğŸ“– ÙˆØ­Ø¯Ø© Ø§Ù„Ù…Ù†Ù‡Ø¬ (Ù…Ø³ØªÙ‚Ù„Ø© ØªÙ…Ø§Ù…Ø§Ù‹)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ curriculum.module.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ curriculum.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ curriculum.controller.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ entities/
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ subject.entity.ts
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ grade.entity.ts
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ chapter.entity.ts
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ lesson.entity.ts
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ exercise.entity.ts
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ai-tutor/           # ğŸ¤– ÙˆØ­Ø¯Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ (Ø§Ù„Ø¯Ù…Ø§Øº)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ai-tutor.module.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ai-tutor.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ai-tutor.controller.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ prompts/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ socratic-teacher.prompt.ts
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ learning/           # ğŸ“Š ÙˆØ­Ø¯Ø© Ø§Ù„ØªÙ‚Ø¯Ù… ÙˆØ§Ù„ØªØ¹Ù„Ù…
â”‚   â”‚   â”‚       â”œâ”€â”€ learning.module.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ learning.service.ts
â”‚   â”‚   â”‚       â””â”€â”€ learning.controller.ts
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ shared/                 # ğŸ”„ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„Ù…Ø´ØªØ±ÙƒØ© (Shared Kernel)
â”‚   â”‚       â”œâ”€â”€ entities/
â”‚   â”‚       â”‚   â””â”€â”€ base.entity.ts
â”‚   â”‚       â”œâ”€â”€ exceptions/
â”‚   â”‚       â”‚   â””â”€â”€ domain.exception.ts
â”‚   â”‚       â””â”€â”€ utils/
â”‚   â”‚           â””â”€â”€ result.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ prisma/
â”‚   â”‚   â””â”€â”€ schema.prisma           # Ù…Ø®Ø·Ø· Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
â”‚   â”‚
â”‚   â”œâ”€â”€ tsconfig.json               # ØªÙƒÙˆÙŠÙ† TypeScript
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ .env.example                # Ù…Ø«Ø§Ù„ Ø¹Ù„Ù‰ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø©
â”‚
â”œâ”€â”€ ğŸ¨ Frontend (Next.js)
â”‚   â””â”€â”€ frontend/
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ app/
â”‚       â”‚   â”‚   â”œâ”€â”€ layout.tsx      # Ø§Ù„ØªØ®Ø·ÙŠØ· Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ
â”‚       â”‚   â”‚   â””â”€â”€ page.tsx        # Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ components/         # Ù…ÙƒÙˆÙ†Ø§Øª Atomic Design
â”‚       â”‚   â”‚   â”‚
â”‚       â”‚   â”‚   â”œâ”€â”€ atoms/          # âš›ï¸ Ø§Ù„Ø°Ø±Ø§Øª (Ù…ÙƒÙˆÙ†Ø§Øª Ø£Ø³Ø§Ø³ÙŠØ©)
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ Input.tsx
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ Badge.tsx
â”‚       â”‚   â”‚   â”‚   â”œâ”€â”€ MathFormula.tsx
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ index.ts
â”‚       â”‚   â”‚   â”‚
â”‚       â”‚   â”‚   â”œâ”€â”€ molecules/      # ğŸ”— Ø§Ù„Ø¬Ø²ÙŠØ¦Ø§Øª (Ù…ÙƒÙˆÙ†Ø§Øª Ù…Ø±ÙƒØ¨Ø©)
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ [Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±]
â”‚       â”‚   â”‚   â”‚
â”‚       â”‚   â”‚   â”œâ”€â”€ organisms/      # ğŸ¦  Ø§Ù„ÙƒØ§Ø¦Ù†Ø§Øª (Ù…ÙƒÙˆÙ†Ø§Øª Ù…Ø¹Ù‚Ø¯Ø©)
â”‚       â”‚   â”‚   â”‚   â””â”€â”€ [Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±]
â”‚       â”‚   â”‚   â”‚
â”‚       â”‚   â”‚   â””â”€â”€ templates/      # ğŸ“„ Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨
â”‚       â”‚   â”‚       â””â”€â”€ [Ù‚ÙŠØ¯ Ø§Ù„ØªØ·ÙˆÙŠØ±]
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ lib/                # Ù…ÙƒØªØ¨Ø§Øª Ù…Ø³Ø§Ø¹Ø¯Ø©
â”‚       â”‚   â””â”€â”€ styles/
â”‚       â”‚       â””â”€â”€ globals.css
â”‚       â”‚
â”‚       â”œâ”€â”€ next.config.js
â”‚       â”œâ”€â”€ tailwind.config.js
â”‚       â”œâ”€â”€ tsconfig.json
â”‚       â””â”€â”€ package.json
â”‚
â””â”€â”€ ğŸ“„ Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø´Ø±ÙˆØ¹
    â”œâ”€â”€ README.md                   # Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
    â”œâ”€â”€ PROJECT_STRUCTURE.md        # Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ù
    â””â”€â”€ .gitignore

```

## ğŸ¯ Ø§Ù„ÙˆØ­Ø¯Ø§Øª ÙˆØ¹Ù„Ø§Ù‚Ø§ØªÙ‡Ø§

### Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ÙŠØ§Øª (Dependency Rules)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Presentation Layer                  â”‚
â”‚    (Controllers, REST APIs, Swagger)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Application Layer                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚  Auth   â”‚  â”‚ Curriculum â”‚  â”‚Learning â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚        â†“             â†‘               â†“       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚        AI Tutor (Brain)             â”‚   â”‚
â”‚   â”‚  - Can read from Curriculum         â”‚   â”‚
â”‚   â”‚  - Uses RAG + LLM                   â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Shared Kernel                        â”‚
â”‚  (BaseEntity, Result<T>, Exceptions)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Infrastructure                       â”‚
â”‚  (Prisma, PostgreSQL, Vector DB)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### âœ… Ù…Ø³Ù…ÙˆØ­:
- `ai-tutor` â†’ ÙŠÙ‚Ø±Ø£ Ù…Ù† `curriculum`
- `learning` â†’ ÙŠÙ‚Ø±Ø£ Ù…Ù† `curriculum`
- Ø£ÙŠ ÙˆØ­Ø¯Ø© â†’ ØªØ³ØªØ®Ø¯Ù… `shared`

### âŒ Ù…Ù…Ù†ÙˆØ¹:
- `curriculum` â†’ Ù„Ø§ ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø£ÙŠ ÙˆØ­Ø¯Ø© Ø£Ø®Ø±Ù‰
- `shared` â†’ Ù„Ø§ ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø£ÙŠ ÙˆØ­Ø¯Ø©
- Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ø¨ÙŠÙ† Ø§Ù„ÙˆØ­Ø¯Ø§Øª (ÙŠØ¬Ø¨ Ø§Ø³ØªØ®Ø¯Ø§Ù… Public API)

## ğŸ—„ï¸ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Database Schema)

### Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:

1. **users** - Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† (Ø·Ù„Ø§Ø¨ØŒ Ù…Ø¹Ù„Ù…ÙŠÙ†)
2. **subjects** - Ø§Ù„Ù…ÙˆØ§Ø¯ (Ø±ÙŠØ§Ø¶ÙŠØ§Øª)
3. **grades** - Ø§Ù„ØµÙÙˆÙ (1-12)
4. **chapters** - Ø§Ù„ÙØµÙˆÙ„
5. **lessons** - Ø§Ù„Ø¯Ø±ÙˆØ³ (Ù…Ø¹ embeddings Ù„Ù„Ù€ RAG)
6. **exercises** - Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ†
7. **student_progress** - ØªÙ‚Ø¯Ù… Ø§Ù„Ø·Ù„Ø§Ø¨
8. **quiz_attempts** - Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª
9. **badges** - Ø§Ù„Ø´Ø§Ø±Ø§Øª
10. **user_badges** - Ø´Ø§Ø±Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
11. **chat_sessions** - Ø¬Ù„Ø³Ø§Øª Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ù…Ø¹ AI

## ğŸš€ Ø³ÙŠØ± Ø§Ù„Ø¹Ù…Ù„ (Workflow)

### 1. ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
```
User â†’ auth/login â†’ JWT Token â†’ Store in Frontend
```

### 2. ØªØµÙØ­ Ø§Ù„Ù…Ù†Ù‡Ø¬
```
Frontend â†’ curriculum/grade/1 â†’ Get Chapters & Lessons
```

### 3. Ø¨Ø¯Ø¡ Ù…Ø­Ø§Ø¯Ø«Ø© Ù…Ø¹ Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø°ÙƒÙŠ
```
Student Question
    â†“
ai-tutor/chat
    â†“
RAG: curriculum.searchContent() â† Vector Search
    â†“
Build Prompt (Socratic Style + Context + History)
    â†“
LLM (OpenAI/Claude)
    â†“
Response â†’ Frontend
```

### 4. Ø­Ù„ ØªÙ…Ø±ÙŠÙ†
```
Student Attempts Exercise
    â†“
learning/quiz/attempt
    â†“
Calculate Score â†’ Update Progress â†’ Award Points/Badges
    â†“
Return Results + Feedback
```

## ğŸ“¦ Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

### Backend
| Ø§Ù„Ù…ÙƒØªØ¨Ø© | Ø§Ù„ØºØ±Ø¶ |
|---------|-------|
| @nestjs/common | Core NestJS |
| @prisma/client | ORM |
| @nestjs/swagger | API Documentation |
| class-validator | Input Validation |
| openai/anthropic | LLM Integration |

### Frontend
| Ø§Ù„Ù…ÙƒØªØ¨Ø© | Ø§Ù„ØºØ±Ø¶ |
|---------|-------|
| next | React Framework |
| react-katex | Math Formulas |
| zustand | State Management |
| tailwindcss | Styling |

## ğŸ”‘ Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¨ÙŠØ¦Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©

```env
DATABASE_URL=postgresql://...
JWT_SECRET=your-secret
OPENAI_API_KEY=sk-...
SUPABASE_URL=https://...
SUPABASE_KEY=...
PORT=3000
NODE_ENV=development
```

## ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù‡Ø§Ù…Ø©

1. **TypeScript Strict Mode**: Ù…ÙØ¹Ù‘Ù„ ÙÙŠ ÙƒÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª
2. **Path Aliases**: Ø§Ø³ØªØ®Ø¯Ù… `@modules/*`, `@shared/*`, `@config/*`
3. **API Documentation**: Swagger Ù…ØªÙˆÙØ± ÙÙŠ `/api/docs`
4. **Arabic First**: ÙƒÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø£ÙˆÙ„Ø§Ù‹
5. **Mobile First**: Tailwind CSS Ù…Ø¹ ØªØµÙ…ÙŠÙ… Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ Ø£ÙˆÙ„Ø§Ù‹

---

ØªÙ… ØªÙˆØ«ÙŠÙ‚ Ù‡Ø°Ø§ Ø§Ù„Ù…Ù„Ù Ø¨ØªØ§Ø±ÙŠØ®: 2025-11-20
